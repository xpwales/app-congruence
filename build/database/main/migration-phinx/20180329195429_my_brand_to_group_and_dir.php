<?php


use Phinx\Migration\AbstractMigration;

class MyBrandToGroupAndDir extends AbstractMigration
{
	public function up()
	{
		parent::up(); // TODO: Change the autogenerated stub

		$this->execute(
			"CREATE TABLE `BRND_DIR_relation` (
				  `BRND_id` INT UNSIGNED NOT NULL,
				  `DIR_id` INT UNSIGNED NOT NULL,
				  PRIMARY KEY (`BRND_id`, `DIR_id`),
				  INDEX `fk_DIR_id_idx` (`DIR_id` ASC),
				  CONSTRAINT `fk_BRND_DIR_BRND_id`
				  FOREIGN KEY (`BRND_id`)
				  REFERENCES `BRND_brand` (`BRND_id`)
				    ON DELETE RESTRICT
				    ON UPDATE RESTRICT,
				  CONSTRAINT `fk_BRND_DIR_DIR_id`
				  FOREIGN KEY (`DIR_id`)
				  REFERENCES `DIR_directory` (`DIR_id`)
				    ON DELETE RESTRICT
				    ON UPDATE RESTRICT)
				  DEFAULT CHARACTER SET 'utf8' COLLATE utf8_general_ci
				  ENGINE = INNODB;
				
				CREATE TABLE `BRND_GRP_relation` (
				  `BRND_id` INT UNSIGNED NOT NULL,
				  `GRP_id` INT UNSIGNED NOT NULL,
				  PRIMARY KEY (`BRND_id`, `GRP_id`),
				  INDEX `fk_GRP_id_idx` (`GRP_id` ASC),
				  CONSTRAINT `fk_BRND_GRP_BRND_id`
				  FOREIGN KEY (`BRND_id`)
				  REFERENCES `BRND_brand` (`BRND_id`)
				    ON DELETE RESTRICT
				    ON UPDATE RESTRICT,
				  CONSTRAINT `fk_BRND_GRP_GRP_id`
				  FOREIGN KEY (`GRP_id`)
				  REFERENCES `GRP_group` (`GRP_id`)
				    ON DELETE RESTRICT
				    ON UPDATE RESTRICT)
				  DEFAULT CHARACTER SET 'utf8' COLLATE utf8_general_ci
				  ENGINE = INNODB;"
		);
	}
}
